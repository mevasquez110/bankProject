openapi: 3.0.0
info:
  title: Banking API
  version: 1.0.0
  description: API for banking operations including accounts, loans, credit and debit cards, transactions, customers and Yanki.
servers:
  - url: http://localhost:8080/api
    description: Local development server

paths:
  /account/create:
    post:
      summary: Create an account

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountRequest'
      responses:
        '200':
          description: Created account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/AccountResponse'
  /account/balance/{accountNumber}:
    get:
      summary: Check account balance
      parameters:
        - name: accountNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Account balance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/BalanceResponse'
  /account/all/{documentNumber}:
    get:
      summary: View all customer accounts
      parameters:
        - name: documentNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Account List
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AccountResponse'
  /account/update/{accountNumber}:
    put:
      summary: Update account to allow withdrawals
      parameters:
        - name: accountNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Updated account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/AccountResponse'
  /account/delete/{accountNumber}:
    delete:
      summary: Delete account
      parameters:
        - name: accountNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /credits/grant:
    post:
      summary: Grant credit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreditRequest'
      responses:
        '200':
          description: Credit granted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CreditResponse'
  /credits/debt:
    get:
      summary: Check credit debt
      parameters:
        - name: creditId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit debt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CreditDebtResponse'
  /credits/all:
    get:
      summary: See all credits
      responses:
        '200':
          description: List of credits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditResponse'
  /credit-cards/request:
    post:
      summary: Apply for a credit card
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreditCardRequest'
      responses:
        '200':
          description: Credit card requested
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CreditCardResponse'
  /credit-cards/debt:
    get:
      summary: Check credit card debt
      parameters:
        - name: creditCardNumber
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit Card Debt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CreditCardDebtResponse'
  /credit-cards/all:
    get:
      summary: View all credit cards
      responses:
        '200':
          description: List of credit cards
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditCardResponse'
  /credit-cards/update/{creditCardNumber}:
    put:
      summary: Update credit card
      parameters:
        - name: creditCardNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Updated credit card
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CreditCardResponse'
  /credit-cards/delete/{creditCardNumber}:
    delete:
      summary: Delete credit card
      parameters:
        - name: creditCardNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit card removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /customers/register:
    post:
      summary: Registrar Client
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerRequest'
      responses:
        '200':
          description: Registered customer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CustomerResponse'
  /customers/search:
    get:
      summary: Search for customer by document number
      parameters:
        - name: documentNumber
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Client found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CustomerResponse'
  /customers/all:
    get:
      summary: View all clients
      responses:
        '200':
          description: Listado de clientes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CustomerResponse'
  /customers/update/{documentNumber}:
    put:
      summary: Update customer contact information
      parameters:
        - name: documentNumber
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactDataRequest'
      responses:
        '200':
          description: Customer data updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/CustomerResponse'
  /customers/delete/{documentNumber}:
    delete:
      summary: Delete client
      parameters:
        - name: documentNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted customer
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /debit-card/create:
    post:
      summary: Create debit card
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DebitCardRequest'
      responses:
        '200':
          description: Debit card created
          content:
            application/json:
          $ref: '#/components/schemas/ApiResponse'
  /debit-card/all:
    get:
      summary: View all debit cards
      responses:
        '200':
          description: List of debit cards
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DebitCardResponse'
  /debit-card/balance/{debitCardNumber}:
    get:
      summary: Check debit card balance
      parameters:
        - name: debitCardNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Debit card balance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/BalanceResponse'
  /debit-card/associate-account/{debitCardNumber}:
    put:
      summary: Link account to debit card
      parameters:
        - name: debitCardNumber
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssociateAccountRequest'
      responses:
        '200':
          description: Account associated with debit card
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/DebitCardResponse'
  /debit-card/mark-primary-account/{debitCardNumber}:
    put:
      summary: Mark as primary account
      parameters:
        - name: debitCardNumber
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssociateAccountRequest'
      responses:
        '200':
          description: Mark as primary account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/DebitCardResponse'
  /debit-card/delete/{debitCardNumber}:
    delete:
      summary: Delete debit card
      parameters:
        - name: debitCardNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Debit card deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /transactions/deposit:
    post:
      summary: Make deposit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepositRequest'
      responses:
        '200':
          description: Deposit made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/withdraw:
    post:
      summary: Make withdrawal
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WithdrawalRequest'
      responses:
        '200':
          description: Withdrawal made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/account-transfer:
    post:
      summary: Make a transfer between accounts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountTransferRequest'
      responses:
        '200':
          description: Transfer made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/mobile-transfer:
    post:
      summary: Make mobile transfer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MobileTransferRequest'
      responses:
        '200':
          description: Mobile transfer made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/pay-credit-card:
    post:
      summary: Pay by credit card
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayCreditCardRequest'
      responses:
        '200':
          description: Payment made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/pay-credit:
    post:
      summary: Pay credit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayCreditRequest'
      responses:
        '200':
          description: Payment made
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/charge:
    post:
      summary: Make consumption
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumptionRequest'
      responses:
        '200':
          description: Realized consumption
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/TransactionResponse'
  /transactions/{accountId}:
    get:
      summary: Check account transactions
      parameters:
        - name: accountId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Transaction List
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TransactionResponse'
  /yanki/create:
    post:
      summary: Create Yanki
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/YankiRequest'
      responses:
        '200':
          description: Yanki created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/YankiResponse'
  /yanki/all:
    get:
      summary: See all the Yanki
      responses:
        '200':
          description: List of Yanki
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/YankiResponse'
  /yanki/update/{phoneNumber}:
    put:
      summary: Update Yanki
      parameters:
        - name: phoneNumber
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/YankiUpdateRequest'
      responses:
        '200':
          description: Updated Yanki
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
                properties:
                  data:
                    $ref: '#/components/schemas/YankiResponse'
  /yanki/delete/{phoneNumber}:
    delete:
      summary: Delete Yanki
      parameters:
        - name: phoneNumber
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Yanki eliminated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
components:
  schemas:
    AccountRequest:
      type: object
      properties:
        holderDoc:
          type: array
          items:
            type: string
        authorizedSignatoryDoc:
          type: array
          items:
            type: string
        accountType:
          type: string
        openingAmount:
          type: number
        currency:
          type: string
      required:
        - accountType
        - openingAmount
        - currency
    AccountTransferRequest:
      type: object
      properties:
        accountNumberSender:
          type: string
        accountNumberRecipient:
          type: string
        amount:
          type: number
      required:
        - accountNumberSender
        - accountNumberRecipient
        - amount
    AssociateAccountRequest:
      type: object
      properties:
        associatedAccounts:
          type: array
          items:
            type: string
        primaryAccount:
          type: string
      required:
        - primaryAccount
    ConsumptionRequest:
      type: object
      properties:
        creditCardNumber:
          type: string
        amount:
          type: number
        share:
          type: integer
        productOrServiceName:
          type: string
      required:
        - creditCardNumber
        - amount
        - share
        - productOrServiceName
    ContactDataRequest:
      type: object
      properties:
        email:
          type: string
        address:
          type: string
        phoneNumber:
          type: string
      required:
        - email
        - address
        - phoneNumber
    CreditCardRequest:
      type: object
      properties:
        documentNumber:
          type: string
        availableCredit:
          type: number
        annualInterestRate:
          type: number
        paymentDay:
          type: integer
        annualLateInterestRate:
          type: number
      required:
        - documentNumber
        - availableCredit
        - annualInterestRate
        - paymentDay
        - annualLateInterestRate
    CreditRequest:
      type: object
      properties:
        documentNumber:
          type: string
        amount:
          type: number
        accountNumber:
          type: string
        annualInterestRate:
          type: number
        numberOfInstallments:
          type: integer
        paymentDay:
          type: integer
        annualLateInterestRate:
          type: number
      required:
        - documentNumber
        - amount
        - accountNumber
        - annualInterestRate
        - numberOfInstallments
        - paymentDay
        - annualLateInterestRate
    CustomerRequest:
      type: object
      allOf:
        - $ref: '#/components/schemas/ContactDataRequest'
        - properties:
            fullName:
              type: string
            companyName:
              type: string
            documentType:
              type: string
            documentNumber:
              type: string
            personType:
              type: string
      required:
        - documentType
        - documentNumber
        - personType
    DebitCardRequest:
      type: object
      properties:
        documentNumber:
          type: string
        primaryAccount:
          type: string
      required:
        - documentNumber
        - primaryAccount
    DepositRequest:
      type: object
      properties:
        creditCardNumber:
          type: string
        accountNumber:
          type: string
        amount:
          type: number
      required:
        - creditCardNumber
        - accountNumber
        - amount
    MobileTransferRequest:
      type: object
      properties:
        mobileNumberSender:
          type: string
        mobileNumberRecipient:
          type: string
        amount:
          type: number
      required:
        - mobileNumberSender
        - mobileNumberRecipient
        - amount
    PayCreditCardRequest:
      type: object
      properties:
        creditCardNumber:
          type: string
        amount:
          type: number
      required:
        - creditCardNumber
        - amount
    PayCreditRequest:
      type: object
      properties:
        creditId:
          type: string
        amount:
          type: number
      required:
        - creditId
        - amount
    WithdrawalRequest:
      type: object
      properties:
        creditCardNumber:
          type: string
        amount:
          type: number
      required:
        - creditCardNumber
        - amount
    YankiRequest:
      type: object
      properties:
        name:
          type: string
        phoneNumber:
          type: string
        documentType:
          type: string
        documentNumber:
          type: string
      required:
        - name
        - phoneNumber
        - documentType
        - documentNumber
    YankiUpdateRequest:
      type: object
      properties:
        accountNumber:
          type: string
      required:
        - accountNumber
    AccountResponse:
      type: object
      properties:
        accountNumber:
          type: string
        monthlyTransactionLimit:
          type: integer
        maintenanceCommission:
          type: number
        withdrawalDepositDate:
          type: string
          format: date-time
        amount:
          type: number
        currency:
          type: string
        isBlocked:
          type: boolean
        allowWithdrawals:
          type: boolean
    ApiResponse:
      type: object
      properties:
        message:
          type: string
        statusCode:
          type: integer
        data:
          type: object
    BalanceResponse:
      type: object
      properties:
        accountNumber:
          type: string
        amount:
          type: number
        allowWithdrawals:
          type: boolean
    CreditCardDebtResponse:
      type: object
      properties:
        creditCardNumber:
          type: string
        totalDebt:
          type: number
        share:
          type: number
        availableCredit:
          type: number
    CreditCardResponse:
      type: object
      properties:
        creditCardNumber:
          type: string
        availableCredit:
          type: number
        annualInterestRate:
          type: number
        annualLateInterestRate:
          type: number
        paymentDay:
          type: integer
        allowConsumption:
          type: boolean
    CreditDebtResponse:
      type: object
      properties:
        creditId:
          type: string
        availableAmount:
          type: number
        totalDebt:
          type: number
        share:
          type: number
    CreditResponse:
      type: object
      properties:
        creditId:
          type: string
        amount:
          type: number
        annualInterestRate:
          type: number
        numberOfInstallments:
          type: integer
        paymentDay:
          type: integer
        annualLateInterestRate:
          type: number
    CustomerResponse:
      type: object
      properties:
        customeId:
          type: string
        fullName:
          type: string
        companyName:
          type: string
        email:
          type: string
        address:
          type: string
        phoneNumber:
          type: string
        documentNumber:
          type: string
        personType:
          type: string
    DebitCardResponse:
      type: object
      properties:
        debitCardNumber:
          type: string
        associatedAccounts:
          type: array
          items:
            type: string
        primaryAccount:
          type: string
        isBlocked:
          type: boolean
        isActive:
          type: boolean
    TransactionResponse:
      type: object
      properties:
        transactionId:
          type: string
        accountNumber:
          type: string
        creditCardNumber:
          type: string
        creditId:
          type: string
        amount:
          type: number
        createDate:
          type: string
          format: date-time
        transactionType:
          type: string
    YankiResponse:
      type: object
      properties:
        name:
          type: string
        phoneNumber:
          type: string